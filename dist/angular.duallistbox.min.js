/**
 * AngularDualListBox - A dual selector box in the vein of the efficient dual list box built with jquery
 * @version v1.0.2
 * @link https://github.com/killyosaur/AngularDualListBox
 * @license CC-BY-SA-4.0
 */!function(){angular.module("killyosaur.dualListBox",[]),angular.module("killyosaur.dualListBox").directive("dualListBox",[function(){return{restrict:"AE",require:["^ngModel","^dualListBox"],scope:{source:"=",controlDisabled:"&"},replace:!0,templateUrl:"templates/duallistboxes",controller:"dualListBoxController",controllerAs:"dualListBox",link:function(t,e,n,o){var l=o[0],i=o[1];t.selectionBoxStyle={width:"100%",height:"200px"},angular.isDefined(n.height)&&(t.selectionBoxStyle.height=n.height),l.$viewChangeListeners.push(function(){t.$eval(n.ngChange)});var a=l.$modelValue.length;i.destinationData=new Array(a),l.$render=function(){i.render(l.$modelValue)},t.setViewValue=function(t){l.$setViewValue(t),l.$render()}}}}]),angular.module("killyosaur.dualListBox").constant("dualListBoxConfig",{text:"name",value:"id",sourceTitle:"Available Items",destinationTitle:"Selected Items",timeout:500,textLength:45,moveAllBtn:!0,maxAllBtn:500,warning:"Are you sure you want to move this many items? Doing so can cause your browser to become unresponsive."}),angular.module("killyosaur.dualListBox").controller("dualListBoxController",["$scope","$attrs","$timeout","$window","dualListBoxConfig",function(t,e,n,o,l){function i(t,e){for(var n=[],o=0;o<t.length;o++){var l=a(e,t[o]);-1===l&&n.push(t[o])}return n}function a(t,e){var n=0,o=t.length;if(e.hasOwnProperty(u.options.value)){for(;o>n;n++)if(t[n][u.options.value]===e[u.options.value])return n}else for(;o>n;n++){var l=!1;for(var i in e)t[n].hasOwnProperty(i)&&e.hasOwnProperty(i)&&(l=t[n][i]===e[i]);if(l)return n}return-1}function s(){return angular.isDefined(t.controlDisabled)&&t.controlDisabled()||d}function r(t,e){if(!angular.isDefined(e)||!angular.isArray(e))throw"No valid data source available!";angular.isUndefined(t)||0===t.length?u.sourceData=[].concat(e):u.sourceData=i(e,t)}var u=this,d=!1;u.render=function(e){u.destinationData=e,r(e,t.source)},u.sourceFilter="",u.destinationFilter="",u.options={};for(var c in l)l.hasOwnProperty(c)&&(u.options[c]=angular.isDefined(e[c])?angular.isString(l[c])?e[c]:t.$parent.$eval(e[c]):l[c]);e.$observe("disabled",function(t){d=t}),u.isControlDisabled=function(t){return angular.isUndefined(t)&&s()||t||s()},u.move=function(e){e.preventDefault();var l=e.currentTarget;n(function(){var e=l.getAttribute("data-type"),n=[];switch(u.destinationData&&(n=n.concat(u.destinationData)),e){case"atr":(0===u.options.maxAllBtn||u.sourceFiltered.length>=u.options.maxAllBtn&&o.confirm(u.options.warning)||u.sourceFiltered.length<u.options.maxAllBtn)&&(n=n.concat(u.sourceFiltered),u.sourceSelectedData&&(u.sourceSelectedData.length=0));break;case"atl":(0===u.options.maxAllBtn||u.destinationFiltered.length>=u.options.maxAllBtn&&o.confirm(u.options.warning)||u.destinationFiltered.length<u.options.maxAllBtn)&&(n=i(u.destinationData,u.destinationFiltered),u.destinationSelectedData&&(u.destinationSelectedData.length=0));break;case"str":n=n.concat(u.sourceSelectedData),u.sourceSelectedData.length=0;break;case"stl":n=i(u.destinationData,u.destinationSelectedData),u.destinationSelectedData.length=0}t.setViewValue(n)},u.options.timeout)}}]),angular.module("killyosaur.dualListBox").filter("filterBy",["$filter",function(t){return function(e,n,o){var l={};return o?l[o]=n:l=n,t("filter")(e,l)}}]),angular.module("killyosaur.dualListBox").run(["$templateCache",function(t){t.put("templates/duallistboxes",'<div class="form-group row">\r\n    <div class="col-md-6">\r\n        <h4><span>{{dualListBox.options.sourceTitle}}</span><small> - showing {{dualListBox.sourceFiltered.length}}</small></h4>\r\n        <input style="margin-bottom: 5px" class="filter form-control" type="text" ng-model="dualListBox.sourceFilter" placeholder="Filter">\r\n        <button ng-show="dualListBox.options.moveAllBtn" data-type="atr" class="btn btn-default col-md-6" style="margin-bottom: 5px" type="button" ng-click="dualListBox.move($event)" ng-disabled="dualListBox.isControlDisabled(dualListBox.sourceFiltered.length == 0)">\r\n            <span class="glyphicon glyphicon-list"></span><span class="glyphicon glyphicon-chevron-right"></span>\r\n        </button>\r\n        <button data-type="str" class="btn btn-default" ng-class="{\'col-md-6 pull-right\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px" type="button" ng-click="dualListBox.move($event)" ng-disabled="dualListBox.isControlDisabled(!dualListBox.sourceSelectedData.length || dualListBox.sourceSelectedData.length == 0)">\r\n            <span class="glyphicon glyphicon-chevron-right"></span>\r\n        </button>\r\n        <select ng-style="selectionBoxStyle" multiple="multiple" ng-model="dualListBox.sourceSelectedData" ng-options="item[dualListBox.options.text] for item in dualListBox.sourceFiltered = (dualListBox.sourceData | filterBy:dualListBox.sourceFilter:dualListBox.options.text)"></select>\r\n    </div>\r\n    <div class="col-md-6">\r\n        <h4><span>{{dualListBox.options.destinationTitle}}</span><small> - showing {{dualListBox.destinationFiltered.length || 0}}</small></h4>\r\n        <input style="margin-bottom: 5px" class="filter form-control" type="text" ng-model="dualListBox.destinationFilter" placeholder="Filter">\r\n        <button data-type="stl" class="btn btn-default" ng-class="{\'col-md-6\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px" type="button" ng-click="dualListBox.move($event)" ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationSelectedData.length || dualListBox.destinationSelectedData.length == 0)">\r\n            <span class="glyphicon glyphicon-chevron-left"></span>\r\n        </button>\r\n        <button ng-show="dualListBox.options.moveAllBtn" data-type="atl" class="btn btn-default col-md-6 pull-right" style="margin-bottom: 5px" type="button" ng-click="dualListBox.move($event)" ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationFiltered || dualListBox.destinationFiltered.length == 0)">\r\n            <span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-list"></span>\r\n        </button>\r\n        <select ng-style="selectionBoxStyle" multiple="multiple" ng-model="dualListBox.destinationSelectedData" ng-options="item[dualListBox.options.text] for item in dualListBox.destinationFiltered = (dualListBox.destinationData | filterBy:dualListBox.destinationFilter:dualListBox.options.text)"></select>\r\n    </div>\r\n</div>')}])}();