/**
 * AngularDualListBox - A dual selector box in the vein of the efficient dual list box built with jquery
 * @version v0.0.15
 * @link https://github.com/killyosaur/AngularDualListBox
 * @license Creative Commons 4.0
 */
"use strict";angular.module("killyosaur.dualListBox",[]).run(["$templateCache",function(t){t.put("template/duallistbox/boxes.html",'<div class="form-group row">    <div class="col-md-6">        <h4><span>{{options.sourceTitle}}</span><small> - showing {{sourceFiltered.length}}</small></h4>        <input style="margin-bottom: 5px;" class="filter form-control" type="text" ng-model="sourceFilter" placeholder="Filter" />        <button ng-show="options.moveAllBtn" data-type="atr" class="btn btn-default col-md-6" style="margin-bottom: 5px;" type="button" ng-click="move($event)" ng-disabled="isControlDisabled(sourceFiltered.length == 0)">            <span class="glyphicon glyphicon-list"></span><span class="glyphicon glyphicon-chevron-right"></span>        </button>        <button data-type="str" class="btn btn-default " ng-class="{\'col-md-6 pull-right\': options.moveAllBtn, \'col-md-12\': !options.moveAllBtn}" style="margin-bottom: 5px;" type="button" ng-click="move($event)" ng-disabled="isControlDisabled(!sourceSelectedData.length || sourceSelectedData.length == 0)">            <span class="glyphicon glyphicon-chevron-right"></span>        </button>        <select ng-style="selectionBoxStyle" multiple="multiple" ng-model="sourceSelectedData" ng-options="item[options.text] for item in sourceFiltered = (sourceData | filter:filterBy(sourceFilter))"></select>    </div>    <div class="col-md-6">        <h4><span>{{options.destinationTitle}}</span><small> - showing {{destinationFiltered.length ? destinationFiltered.length : 0}}</small></h4>        <input style="margin-bottom: 5px;" class="filter form-control" type="text" ng-model="destinationFilter" placeholder="Filter" />        <button data-type="stl" class="btn btn-default " ng-class="{\'col-md-6\': options.moveAllBtn, \'col-md-12\': !options.moveAllBtn}"style="margin-bottom: 5px;" type="button" ng-click="move($event)" ng-disabled="isControlDisabled(!destinationSelectedData.length || destinationSelectedData.length == 0)">            <span class="glyphicon glyphicon-chevron-left"></span>        </button>        <button ng-show="options.moveAllBtn" data-type="atl" class="btn btn-default col-md-6 pull-right" style="margin-bottom: 5px;" type="button" ng-click="move($event)" ng-disabled="isControlDisabled(!destinationFiltered || destinationFiltered.length == 0)">            <span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-list"></span>        </button>        <select ng-style="selectionBoxStyle" multiple="multiple" ng-model="destinationSelectedData" ng-options="item[options.text] for item in destinationFiltered = (destinationData | filter:filterBy(destinationFilter))"></select>    </div></div>')}]).controller("dualListBoxController",["$scope","$attrs","$timeout","$q",function(t,e,n,o){function l(t,e,n){var o,l=[],i=0,a=t.length;for(n=!!n;a>i;i++)o=!!e(t[i],i),n!==o&&l.push(t[i]);return l}function i(){return angular.isDefined(t.controlDisabled)&&t.controlDisabled()||d}function a(e,n){if(!angular.isDefined(n)||!angular.isArray(n))throw"No valid data source available!";angular.isUndefined(e)||0==e.length?(t.sourceData=[],t.sourceData=t.sourceData.concat(n)):t.sourceData=l(n,function(t){return-1===s(e,t)})}function s(e,n){for(var o=0,l=e.length;l>o;o++)if(e[o][t.options.value]===n[t.options.value])return o;return-1}var r=this,c={$setViewValue:angular.noop},d=!1;this.init=function(t){c=t,c.$render=function(){r.render()}},this.render=function(){t.destinationData=c.$modelValue},e.$observe("disabled",function(t){d=t}),t.$watch("destinationData",function(e){a(e,t.source)}),t.$watch("source",function(e){a(t.destinationData,e)},!0),t.isControlDisabled=function(t){return angular.isUndefined(t)&&i()||t||i()},t.move=function(e){e.preventDefault();var l=o.defer(),i=e.currentTarget;return n(function(){var e=i.getAttribute("data-type"),n=[];n=n.concat(t.destinationData),t.$apply(function(){switch(e){case"atr":(t.sourceFiltered.length>=t.options.maxAllBtn&&confirm(t.options.warning)||t.sourceFiltered.length<t.options.maxAllBtn)&&(n=n.concat(t.sourceFiltered),t.sourceSelectedData&&(t.sourceSelectedData.length=0));break;case"atl":(t.destinationFiltered.length>=t.options.maxAllBtn&&confirm(t.options.warning)||t.destinationFiltered.length<t.options.maxAllBtn)&&(angular.forEach(t.destinationFiltered,function(t){var e=s(n,t);n.splice(e,1)}),t.destinationSelectedData&&(t.destinationSelectedData.length=0));break;case"str":n=n?n.concat(t.sourceSelectedData):t.sourceSelectedData,t.sourceSelectedData.length=0;break;case"stl":angular.forEach(t.destinationSelectedData,function(e){var o=s(t.destinationData,e);n.splice(o,1)}),t.destinationSelectedData.length=0}}),c.$setViewValue(n),c.$render(),l.resolve(n)},t.options.timeout),l},t.filterBy=function(e){var n={};return n[t.options.text]=e,n}}]).constant("dualListBoxConfig",{text:"name",value:"id",sourceTitle:"Available Items",destinationTitle:"Selected Items",timeout:500,textLength:45,moveAllBtn:!0,maxAllBtn:500,warning:"Are you sure you want to move this many items? Doing so can cause your browser to become unresponsive."}).directive("dualListBox",["dualListBoxConfig",function(t){return{restrict:"AE",require:["^ngModel","^dualListBox"],scope:{source:"=",controlDisabled:"&"},replace:!0,templateUrl:"template/duallistbox/boxes.html",controller:"dualListBoxController",link:function(e,n,o,l){var i=l[0],a=l[1];e.sourceFilter="",e.destinationFilter="";var s=i.$modelValue.length;e.destinationData=new Array(s),e.sourceData=[],e.options={},e.selectionBoxStyle={width:"100%",height:"200px"},angular.isDefined(o.height)&&(e.selectionBoxStyle.height=o.height);for(var r in t)e.options[r]=angular.isDefined(o[r])?angular.isString(t[r])?o[r]:e.$parent.$eval(o[r]):t[r];i.$viewChangeListeners.push(function(){e.$eval(o.ngChange)}),a.init(i)}}}]);