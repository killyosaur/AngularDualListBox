/**
 * AngularDualListBox - A dual selector box in the vein of the efficient dual list box built with jquery
 * @version v0.0.16
 * @link https://github.com/killyosaur/AngularDualListBox
 * @license CC-BY-SA-4.0
 */!function(){angular.module("killyosaur.dualListBox",[]),angular.module("killyosaur.dualListBox").directive("dualListBox",["dualListBoxConfig",function(t){return{restrict:"AE",require:["^ngModel","^dualListBox"],scope:{source:"=",controlDisabled:"&"},replace:!0,templateUrl:"templates/duallistboxes",controller:"dualListBoxController",controllerAs:"dualListBox",link:function(t,e,o,n){var l=n[0],a=n[1];t.selectionBoxStyle={width:"100%",height:"200px"},angular.isDefined(o.height)&&(t.selectionBoxStyle.height=o.height),l.$viewChangeListeners.push(function(){t.$eval(o.ngChange)});var i=l.$modelValue.length;a.destinationData=new Array(i),l.$render=function(){a.render(l.$modelValue)},t.setViewValue=function(t){l.$setViewValue(t),l.$render()}}}}]),angular.module("killyosaur.dualListBox").constant("dualListBoxConfig",{text:"name",value:"id",sourceTitle:"Available Items",destinationTitle:"Selected Items",timeout:500,textLength:45,moveAllBtn:!0,maxAllBtn:500,warning:"Are you sure you want to move this many items? Doing so can cause your browser to become unresponsive."}),angular.module("killyosaur.dualListBox").controller("dualListBoxController",["$scope","$attrs","$timeout","dualListBoxConfig",function(t,e,o,n){function l(t,e,o){var n,l=[],a=0,i=t.length;for(o=!!o;i>a;a++)n=!!e(t[a],a),o!==n&&l.push(t[a]);return l}function a(){return angular.isDefined(t.controlDisabled)&&t.controlDisabled()||u}function i(t,e){if(!angular.isDefined(e)||!angular.isArray(e))throw"No valid data source available!";angular.isUndefined(t)||0==t.length?(r.sourceData=[],r.sourceData=r.sourceData.concat(e)):r.sourceData=l(e,function(e){return-1===s(t,e)})}function s(t,e){var o=0,n=t.length;if(!t||0===t.length)return-1;if(e.hasOwnProperty(r.options.value)){for(;n>o;o++)if(t[o][r.options.value]===e[r.options.value])return o}else for(;n>o;o++){var l=!1;for(var a in e)t[o].hasOwnProperty(a)&&e.hasOwnProperty(a)&&(l=t[o][a]===e[a]);if(l)return o}return-1}var r=this,u=!1;r.render=function(t){r.destinationData=t},r.sourceFilter="",r.destinationFilter="",r.sourceData=[],r.options={};for(var d in n)r.options[d]=angular.isDefined(e[d])?angular.isString(n[d])?e[d]:t.$parent.$eval(e[d]):n[d];e.$observe("disabled",function(t){u=t}),t.$watchGroup([function(){return r.destinationData},function(){return t.source}],function(t){i(t[0],t[1])}),r.isControlDisabled=function(t){return angular.isUndefined(t)&&a()||t||a()},r.move=function(e){e.preventDefault();var n=e.currentTarget;o(function(){var e=n.getAttribute("data-type"),o=[];switch(r.destinationData&&(o=o.concat(r.destinationData)),e){case"atr":(r.sourceFiltered.length>=r.options.maxAllBtn&&confirm(r.options.warning)||r.sourceFiltered.length<r.options.maxAllBtn)&&(o=o.concat(r.sourceFiltered),r.sourceSelectedData&&(r.sourceSelectedData.length=0));break;case"atl":(r.destinationFiltered.length>=r.options.maxAllBtn&&confirm(r.options.warning)||r.destinationFiltered.length<r.options.maxAllBtn)&&(angular.forEach(r.destinationFiltered,function(t){var e=s(o,t);o.splice(e,1)}),r.destinationSelectedData&&(r.destinationSelectedData.length=0));break;case"str":o=o?o.concat(r.sourceSelectedData):r.sourceSelectedData,r.sourceSelectedData.length=0;break;case"stl":angular.forEach(r.destinationSelectedData,function(t){var e=s(r.destinationData,t);o.splice(e,1)}),r.destinationSelectedData.length=0}t.setViewValue(o)},r.options.timeout)}}]),angular.module("killyosaur.dualListBox").filter("filterBy",["$filter",function(t){return function(e,o,n){var l={};return n?l[n]=o:l=o,t("filter")(e,l)}}]),angular.module("killyosaur.dualListBox").run(["$templateCache",function(t){t.put("templates/duallistboxes",'<div class="form-group row"><div class=col-md-6><h4><span>{{dualListBox.options.sourceTitle}}</span><small>- showing {{dualListBox.sourceFiltered.length}}</small></h4><input style="margin-bottom: 5px;" class="filter form-control" type=text ng-model=dualListBox.sourceFilter placeholder=Filter> <button ng-show=dualListBox.options.moveAllBtn data-type=atr class="btn btn-default col-md-6" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(dualListBox.sourceFiltered.length == 0)"><span class="glyphicon glyphicon-list"></span><span class="glyphicon glyphicon-chevron-right"></span></button> <button data-type=str class="btn btn-default" ng-class="{\'col-md-6 pull-right\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.sourceSelectedData.length || dualListBox.sourceSelectedData.length == 0)"><span class="glyphicon glyphicon-chevron-right"></span></button><select ng-style=selectionBoxStyle multiple ng-model=dualListBox.sourceSelectedData ng-options="item[dualListBox.options.text] for item in dualListBox.sourceFiltered = (dualListBox.sourceData | filterBy:dualListBox.sourceFilter:dualListBox.options.text)"></select></div><div class=col-md-6><h4><span>{{dualListBox.options.destinationTitle}}</span><small>- showing {{dualListBox.destinationFiltered.length || 0}}</small></h4><input style="margin-bottom: 5px;" class="filter form-control" type=text ng-model=dualListBox.destinationFilter placeholder=Filter> <button data-type=stl class="btn btn-default" ng-class="{\'col-md-6\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationSelectedData.length || dualListBox.destinationSelectedData.length == 0)"><span class="glyphicon glyphicon-chevron-left"></span></button> <button ng-show=dualListBox.options.moveAllBtn data-type=atl class="btn btn-default col-md-6 pull-right" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationFiltered || dualListBox.destinationFiltered.length == 0)"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-list"></span></button><select ng-style=selectionBoxStyle multiple ng-model=dualListBox.destinationSelectedData ng-options="item[dualListBox.options.text] for item in dualListBox.destinationFiltered = (dualListBox.destinationData | filterBy:dualListBox.destinationFilter:dualListBox.options.text)"></select></div></div>')}])}();