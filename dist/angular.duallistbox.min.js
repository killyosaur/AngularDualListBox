/**
 * AngularDualListBox - A dual selector box in the vein of the efficient dual list box built with jquery
 * @version v0.0.15
 * @link https://github.com/killyosaur/AngularDualListBox
 * @license Creative Commons 4.0
 */!function(){var t=angular.module("killyosaur.dualListBox",[]);t.directive("dualListBox",["dualListBoxConfig",function(t){return{restrict:"AE",require:["^ngModel","^dualListBox"],scope:{source:"=",controlDisabled:"&"},replace:!0,templateUrl:"templates/duallistboxes",controller:"dualListBoxController",controllerAs:"dualListBox",link:function(t,e,n,o){var l=o[0],i=o[1];t.selectionBoxStyle={width:"100%",height:"200px"},angular.isDefined(n.height)&&(t.selectionBoxStyle.height=n.height),l.$viewChangeListeners.push(function(){t.$eval(n.ngChange)});var a=l.$modelValue.length;i.destinationData=new Array(a),i.init(l)}}}]),t.constant("dualListBoxConfig",{text:"name",value:"id",sourceTitle:"Available Items",destinationTitle:"Selected Items",timeout:500,textLength:45,moveAllBtn:!0,maxAllBtn:500,warning:"Are you sure you want to move this many items? Doing so can cause your browser to become unresponsive."}),t.controller("dualListBoxController",["$scope","$attrs","$timeout","$q","dualListBoxConfig",function(t,e,n,o,l){function i(t,e,n){var o,l=[],i=0,a=t.length;for(n=!!n;a>i;i++)o=!!e(t[i],i),n!==o&&l.push(t[i]);return l}function a(){return angular.isDefined(t.controlDisabled)&&t.controlDisabled()||c}function s(t,e){if(!angular.isDefined(e)||!angular.isArray(e))throw"No valid data source available!";angular.isUndefined(t)||0==t.length?(u.sourceData=[],u.sourceData=u.sourceData.concat(e)):u.sourceData=i(e,function(e){return-1===r(t,e)})}function r(t,e){var n=0,o=t.length;if(!t||0===t.length)return-1;if(e.hasOwnProperty(u.options.value)){for(;o>n;n++)if(t[n][u.options.value]===e[u.options.value])return n}else for(;o>n;n++){var l=!1;for(var i in e)t[n].hasOwnProperty(i)&&e.hasOwnProperty(i)&&(l=t[n][i]===e[i]);if(l)return n}return-1}var u=this,d={$setViewValue:angular.noop},c=!1;u.init=function(t){d=t,d.$render=function(){u.render()}},u.render=function(){u.destinationData=d.$modelValue},u.sourceFilter="",u.destinationFilter="",u.sourceData=[],u.options={};for(var p in l)u.options[p]=angular.isDefined(e[p])?angular.isString(l[p])?e[p]:t.$parent.$eval(e[p]):l[p];e.$observe("disabled",function(t){c=t}),t.$watchGroup([function(){return u.destinationData},function(){return t.source}],function(t){s(t[0],t[1])}),u.isControlDisabled=function(t){return angular.isUndefined(t)&&a()||t||a()},u.move=function(t){t.preventDefault();var e=o.defer(),l=t.currentTarget;return n(function(){var t=l.getAttribute("data-type"),n=[];switch(u.destinationData&&(n=n.concat(u.destinationData)),t){case"atr":(u.sourceFiltered.length>=u.options.maxAllBtn&&confirm(u.options.warning)||u.sourceFiltered.length<u.options.maxAllBtn)&&(n=n.concat(u.sourceFiltered),u.sourceSelectedData&&(u.sourceSelectedData.length=0));break;case"atl":(u.destinationFiltered.length>=u.options.maxAllBtn&&confirm(u.options.warning)||u.destinationFiltered.length<u.options.maxAllBtn)&&(angular.forEach(u.destinationFiltered,function(t){var e=r(n,t);n.splice(e,1)}),u.destinationSelectedData&&(u.destinationSelectedData.length=0));break;case"str":n=n?n.concat(u.sourceSelectedData):u.sourceSelectedData,u.sourceSelectedData.length=0;break;case"stl":angular.forEach(u.destinationSelectedData,function(t){var e=r(u.destinationData,t);n.splice(e,1)}),u.destinationSelectedData.length=0}d.$setViewValue(n),d.$render(),e.resolve(n)},u.options.timeout),e}}]),t.filter("filterBy",["$filter",function(t){return function(e,n,o){var l={};return o?l[o]=n:l=n,t("filter")(e,l)}}]),angular.module("killyosaur.dualListBox").run(["$templateCache",function(t){t.put("templates/duallistboxes",'<div class="form-group row"><div class=col-md-6><h4><span>{{dualListBox.options.sourceTitle}}</span><small>- showing {{dualListBox.sourceFiltered.length}}</small></h4><input style="margin-bottom: 5px;" class="filter form-control" type=text ng-model=dualListBox.sourceFilter placeholder=Filter> <button ng-show=dualListBox.options.moveAllBtn data-type=atr class="btn btn-default col-md-6" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(dualListBox.sourceFiltered.length == 0)"><span class="glyphicon glyphicon-list"></span><span class="glyphicon glyphicon-chevron-right"></span></button> <button data-type=str class="btn btn-default" ng-class="{\'col-md-6 pull-right\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.sourceSelectedData.length || dualListBox.sourceSelectedData.length == 0)"><span class="glyphicon glyphicon-chevron-right"></span></button><select ng-style=selectionBoxStyle multiple ng-model=dualListBox.sourceSelectedData ng-options="item[dualListBox.options.text] for item in dualListBox.sourceFiltered = (dualListBox.sourceData | filterBy:dualListBox.sourceFilter:dualListBox.options.text)"></select></div><div class=col-md-6><h4><span>{{dualListBox.options.destinationTitle}}</span><small>- showing {{dualListBox.destinationFiltered.length || 0}}</small></h4><input style="margin-bottom: 5px;" class="filter form-control" type=text ng-model=dualListBox.destinationFilter placeholder=Filter> <button data-type=stl class="btn btn-default" ng-class="{\'col-md-6\': dualListBox.options.moveAllBtn, \'col-md-12\': !dualListBox.options.moveAllBtn}" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationSelectedData.length || dualListBox.destinationSelectedData.length == 0)"><span class="glyphicon glyphicon-chevron-left"></span></button> <button ng-show=dualListBox.options.moveAllBtn data-type=atl class="btn btn-default col-md-6 pull-right" style="margin-bottom: 5px;" type=button ng-click=dualListBox.move($event) ng-disabled="dualListBox.isControlDisabled(!dualListBox.destinationFiltered || dualListBox.destinationFiltered.length == 0)"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-list"></span></button><select ng-style=selectionBoxStyle multiple ng-model=dualListBox.destinationSelectedData ng-options="item[dualListBox.options.text] for item in dualListBox.destinationFiltered = (dualListBox.destinationData | filterBy:dualListBox.destinationFilter:dualListBox.options.text)"></select></div></div>')}])}();